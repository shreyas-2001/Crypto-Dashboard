import{Da as a,Ea as g,e as r,f as l,h as n,i as p,k as h,n as C}from"./chunk-7XSQYWME.js";var u=class o{http=C(g);baseUrl="https://api.coingecko.com/api/v3";trendingCoinsCache$=null;topCoinsCache$=null;getTopCoins(t="usd",e=100,i=1){if(t==="usd"&&e===100&&i===1){if(!this.topCoinsCache$){let s=new a().set("vs_currency",t).set("order","market_cap_desc").set("per_page",e.toString()).set("page",i.toString()).set("sparkline","false");this.topCoinsCache$=this.http.get(`${this.baseUrl}/coins/markets`,{params:s}).pipe(p(1),n(m=>(console.error("Error fetching top coins",m),this.topCoinsCache$=null,r([]))))}return this.topCoinsCache$}let c=new a().set("vs_currency",t).set("order","market_cap_desc").set("per_page",e.toString()).set("page",i.toString()).set("sparkline","false");return this.http.get(`${this.baseUrl}/coins/markets`,{params:c}).pipe(n(s=>(console.error("Error fetching top coins",s),r([]))))}getCoinDetails(t){return this.http.get(`${this.baseUrl}/coins/${t}`).pipe(n(e=>(console.error(`Error fetching details for ${t}`,e),r(null))))}getMarketChart(t,e="usd",i="1"){let c=new a().set("vs_currency",e).set("days",i);return this.http.get(`${this.baseUrl}/coins/${t}/market_chart`,{params:c}).pipe(n(s=>(console.error(`Error fetching chart params for ${t}`,s),r(null))))}getTrendingCoins(){return this.trendingCoinsCache$||(this.trendingCoinsCache$=this.http.get(`${this.baseUrl}/search/trending`).pipe(l(t=>t.coins.map(e=>e.item)),p(1),n(t=>(console.error("Error fetching trending coins",t),this.trendingCoinsCache$=null,r([]))))),this.trendingCoinsCache$}static \u0275fac=function(e){return new(e||o)};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};export{u as a};
